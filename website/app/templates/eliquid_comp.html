{% extends "base.html" %}

{% block content %}
    <form action="/eliquids/{{ eliquid.id }}" id="like_form">
        {% if not favourite %}
            <input type="submit" name="submit" value="Like it">
        {% else %}
            <input type="submit" name="submit" value="Unlike it">
        {% endif %}
    </form>


    <h3>{{ eliquid.eliquid_name }}</h3>
    {% if composition %}
        <ul>
            {% for element in composition %}
            <li>
                <p>{{ element.flavoring.flavoring_name }} by {{ element.flavoring.producer_name }}
                    {{ element.quantity }}%</p>
            </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>wtf?</p>
    {% endif %}
<script>
    $(document).ready(function () {
        $("#like_form").submit(function (e) {
            e.preventDefault()
            var $form = $(this),
                term = $form.find( "input[name='submit']" ).val(),
                url = $form.attr( 'action' );
{#            alert(term + " " + url);#}
            var posting = $.post( url, {submit: term} );

            posting.done(function() {
                if ($( "input" ).val() == "Like it") {
                    $ ( "input" ).val("Unlike it");
                } else { $ ( "input" ).val("Like it")};
            })
        });
    });
</script>
{% endblock %}
